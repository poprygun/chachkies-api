accelerator:
  displayName: Spring Kotlin OpenAPI
  description: A sample Spring-based application in Kotlin with OpenAPI endpoints
  iconUrl: https://avatars.githubusercontent.com/u/86276554?s=200&v=4
  tags:
    - kotlin
    - spring
    - openapi
    - swagger

  options:
    - name: artifactId
      label: Artifact ID
      description: Application Artifact Name
      required: true
      dataType: string
      inputType: text
      defaultValue: chachkies-api
    - name: generatedApiFilesPackage
      label: OpenAPI Package
      description: Package of the files generated by OpenAPI
      required: true
      dataType: string
      inputType: text
      defaultValue: "io.microsamples.accelerator.chachkies"
    - name: apiSuffix
      label: OpenAPI Suffix
      description: Suffix to be used for classes generated by OpenAPI
      required: false
      dataType: string
      inputType: text
      defaultValue: Api

engine:
  merge:
    - include: [ "**" ]
    - include: [ "kubernetes/*.yaml", "skaffold.yaml", "settings.gradle.kts" ]
      chain:
        - type: ReplaceText
          substitutions:
            - text: chachkies-api
              with: "#artifactId"
    - include: [ "build.gradle.kts" ]
      chain:
        - type: ReplaceText
          substitutions:
            - text: "io.microsamples.accelerator.chachkies"
              with: "#generatedApiFilesPackage"
            - text: Chachkie
              with: "#apiSuffix"
    - include: [ "src/main/kotlin/**/ChachkiesApiServiceImpl.kt" ]
      chain:
        - type: ReplaceText
          substitutions:
            - text: "import io.microsamples.accelerator.chachkies"
              with: "'import ' + #generatedApiFilesPackage"
            - text: "ChachkiesChachkieService"
              with: "'Chachkies' + #apiSuffix + 'Service'"